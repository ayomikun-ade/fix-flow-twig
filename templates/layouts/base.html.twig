<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}FixFlow - Ticket Management{% endblock %}</title>
    <link rel="icon" type="image/png" href="/public/images/workflow.png" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Franken UI CSS -->
    <link rel="stylesheet" href="https://unpkg.com/franken-ui@1.1.0/dist/css/core.min.css" />

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Slab:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'roboto': ['Roboto Slab', 'serif'],
                        'inter': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            DEFAULT: 'oklch(0.205 0 0)',
                            foreground: 'oklch(0.985 0 0)',
                        },
                        secondary: {
                            DEFAULT: 'oklch(0.97 0 0)',
                            foreground: 'oklch(0.205 0 0)',
                        },
                        muted: {
                            DEFAULT: 'oklch(0.97 0 0)',
                            foreground: 'oklch(0.556 0 0)',
                        },
                        accent: {
                            DEFAULT: 'oklch(0.97 0 0)',
                            foreground: 'oklch(0.205 0 0)',
                        },
                        destructive: {
                            DEFAULT: 'oklch(0.577 0.245 27.325)',
                            foreground: '#ffffff',
                        },
                        border: 'oklch(0.922 0 0)',
                        input: 'oklch(0.922 0 0)',
                        ring: 'oklch(0.708 0 0)',
                    },
                    maxWidth: {
                        'container': '1440px',
                    },
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>

    {% block extra_css %}{% endblock %}
</head>
<body class="bg-white text-foreground">
    {% include 'components/navbar.html.twig' %}

    {% block content %}{% endblock %}

    {% if flash_message %}
    <div class="fixed bottom-4 right-4 bg-white border rounded-lg p-4 shadow-lg z-50 animate-slide-in {% if flash_type == 'success' %}border-l-4 border-l-green-500{% else %}border-l-4 border-l-red-500{% endif %}" id="toast">
        <div class="flex items-center gap-2">
            {% if flash_type == 'success' %}
            <i data-lucide="check-circle" class="w-5 h-5 text-green-500"></i>
            {% else %}
            <i data-lucide="alert-circle" class="w-5 h-5 text-red-500"></i>
            {% endif %}
            <span>{{ flash_message }}</span>
        </div>
    </div>
    <style>
        @keyframes slide-in {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        .animate-slide-in {
            animation: slide-in 0.3s ease-out;
        }
    </style>
    {% endif %}

    <!-- Franken UI JS -->
    <script src="https://unpkg.com/franken-ui@1.1.0/dist/js/core.iife.js"></script>
    <script src="https://unpkg.com/franken-ui@1.1.0/dist/js/icon.iife.js"></script>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Toast auto-hide
        const toast = document.getElementById('toast');
        if (toast) {
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transition = 'opacity 0.3s';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Modal functions
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }
        }

        // Close modal on overlay click
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                e.target.classList.add('hidden');
                e.target.classList.remove('flex');
            }
        });
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
